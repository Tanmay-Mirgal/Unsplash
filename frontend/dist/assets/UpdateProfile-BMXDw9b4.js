import{u as I,r as o,f as S,j as e,I as r,B as n,g as U,h as E,y}from"./index-uah-2sAv.js";import{g as R,h as B,i as C,j as A,C as D,T as z}from"./tabs-BjB-ef1n.js";import{C as m,a as x,d as u,e as p,b as j}from"./card-BeKLQ_hr.js";import{L as t}from"./label-D0Xyc-jN.js";const Y=()=>{const{updateUserProfile:O,isLoading:f}=I(),[s,k]=o.useState({firstName:"",lastName:"",username:"",email:"",bio:"",location:"",website:"",instagram:"",twitter:"",facebook:""}),[v,b]=o.useState(null),[g,N]=o.useState(null),c=o.useRef(null),w=S(),l=a=>{const{id:i,value:d}=a.target;k(h=>({...h,[i]:d}))},F=a=>{var i;(i=a.target.files)!=null&&i[0]&&(b(a.target.files[0]),N(URL.createObjectURL(a.target.files[0])))},T=async()=>{try{const a=new FormData;for(const[h,P]of Object.entries(s))a.append(h,P||"");v&&a.append("profilePic",v);const d={headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${localStorage.getItem("token")}`}};console.log("Sending request with data:",a),await E.put("http://localhost:5000/api/auth/update-profile",a,d),y.success("Profile updated successfully!"),w("/profile")}catch(a){console.error("Error updating profile:",a),y.error("Failed to update profile.")}},L=()=>{b(null),N(null),c.current&&(c.current.value="")};return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-4xl mx-auto py-8 px-4",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Edit Profile"}),e.jsxs(R,{defaultValue:"profile",className:"space-y-6",children:[e.jsxs(B,{className:"w-full justify-start bg-transparent border-b rounded-none h-auto p-0 space-x-8",children:[e.jsx(C,{value:"profile",className:"data-[state=active]:border-b-2 data-[state=active]:border-black rounded-none pb-4",children:"Profile"}),e.jsx(C,{value:"account",className:"data-[state=active]:border-b-2 data-[state=active]:border-black rounded-none pb-4",children:"Account Settings"})]}),e.jsxs(A,{value:"profile",className:"space-y-6",children:[e.jsxs(m,{children:[e.jsxs(x,{children:[e.jsx(u,{children:"Profile Picture"}),e.jsx(p,{children:"Upload a picture to help people recognize you"})]}),e.jsx(j,{children:e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("div",{className:"relative",children:e.jsx("div",{className:"h-24 w-24 rounded-full overflow-hidden bg-gray-200",children:g?e.jsx("img",{src:g,alt:"Profile preview",className:"w-full h-full object-cover"}):e.jsx("div",{className:"h-full w-full flex items-center justify-center text-gray-400",children:"No Image"})})}),e.jsxs("div",{children:[e.jsx(r,{type:"file",accept:"image/*",className:"hidden",id:"avatar-upload",ref:c,onChange:F}),e.jsx(n,{asChild:!0,variant:"outline",className:"mr-2",children:e.jsxs(t,{htmlFor:"avatar-upload",className:"cursor-pointer",children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Upload new picture"]})}),e.jsx(n,{variant:"ghost",className:"text-red-500 hover:text-red-600",onClick:L,children:"Remove"})]})]})})]}),e.jsxs(m,{children:[e.jsxs(x,{children:[e.jsx(u,{children:"Basic Information"}),e.jsx(p,{children:"Update your personal information"})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"firstName",children:"First Name"}),e.jsx(r,{id:"firstName",value:s.firstName,onChange:l,placeholder:"Enter your first name",className:"text-black"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"lastName",children:"Last Name"}),e.jsx(r,{id:"lastName",value:s.lastName,onChange:l,placeholder:"Enter your last name",className:"text-black"})]})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"username",children:"Username"}),e.jsx(r,{id:"username",value:s.username,onChange:l,placeholder:"Enter your username",className:"text-black"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"email",children:"Email"}),e.jsx(r,{id:"email",value:s.email,onChange:l,placeholder:"your@email.com",className:"text-black"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"bio",children:"Bio"}),e.jsx(z,{id:"bio",value:s.bio,onChange:l,placeholder:"Tell us about yourself",rows:4,className:"text-black"})]})]})]}),e.jsxs(m,{children:[e.jsxs(x,{children:[e.jsx(u,{children:"Links"}),e.jsx(p,{children:"Add links to your profiles or websites"})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"location",children:"Location"}),e.jsx(r,{id:"location",value:s.location,onChange:l,placeholder:"Your location",className:"text-black"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"website",children:"Website"}),e.jsx(r,{id:"website",value:s.website,onChange:l,placeholder:"https://example.com",className:"text-black"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"instagram",children:"Instagram"}),e.jsx(r,{id:"instagram",value:s.instagram,onChange:l,placeholder:"https://instagram.com/yourprofile",className:"text-black"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"twitter",children:"Twitter"}),e.jsx(r,{id:"twitter",value:s.twitter,onChange:l,placeholder:"https://twitter.com/yourprofile",className:"text-black"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"facebook",children:"Facebook"}),e.jsx(r,{id:"facebook",value:s.facebook,onChange:l,placeholder:"https://facebook.com/yourprofile",className:"text-black"})]})]})]})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-white border-t mt-8 -mx-4 px-4 py-4 flex justify-end space-x-4",children:[e.jsx(n,{variant:"outline",children:"Cancel"}),e.jsx(n,{onClick:T,disabled:f,children:f?e.jsx(U,{className:"animate-spin"}):"Save Changes"})]})]})})};export{Y as default};
