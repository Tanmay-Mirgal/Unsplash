import{c as E,u as I,r,j as e,I as U,B as C}from"./index-uah-2sAv.js";import{u as D}from"./usePostStore-Db7pilkF.js";const M=E("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),O="/assets/hero-image-DUbZRUdw.jpg",L=()=>{var x,u,g,f;const{getAllPosts:d,isLoading:j,isError:w,error:N}=D(),{followUser:b,unfollowUser:v}=I(),[m,y]=r.useState([]),[l,c]=r.useState(null),[S,h]=r.useState(!1),[n,i]=r.useState(!1);r.useEffect(()=>{(async()=>{const t=await d();if(t){const a=[...t];for(let o=a.length-1;o>0;o--){const p=Math.floor(Math.random()*(o+1));[a[o],a[p]]=[a[p],a[o]]}y(a)}})()},[d]),r.useEffect(()=>{const s=JSON.parse(localStorage.getItem("isFollowing"));s!==null&&i(s)},[]);const k=s=>{var t;c(s),h(!0),i(((t=s.user)==null?void 0:t.isFollowing)||!1)},F=()=>{c(null),h(!1)},P=async()=>{try{n?(await v(l.user._id),i(!1),localStorage.setItem("isFollowing",JSON.stringify(!1))):(await b(l.user._id),i(!0),localStorage.setItem("isFollowing",JSON.stringify(!0))),c(s=>({...s,user:{...s.user,isFollowed:!s.user.isFollowed}}))}catch(s){console.error("Error in follow/unfollow:",s)}};return j?e.jsx("p",{children:"Loading..."}):w?e.jsxs("p",{children:["Error: ",N]}):e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsxs("div",{className:"relative h-96",children:[e.jsx("div",{className:"absolute inset-0",children:e.jsx("img",{src:O,alt:"Mountain landscape",className:"w-full h-full object-cover"})}),e.jsx("div",{className:"absolute inset-0 bg-black/30",children:e.jsxs("div",{className:"max-w-4xl mx-auto pt-20 px-4",children:[e.jsx("h2",{className:"text-4xl font-bold text-white mb-4",children:"The internet's source for visuals."}),e.jsx("p",{className:"text-white mb-6",children:"Powered by creators everywhere."}),e.jsxs("div",{className:"relative",children:[e.jsx(U,{type:"search",placeholder:"Search high-resolution images, categories, wallpapers",className:"w-full pl-10 py-6"}),e.jsx(M,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]}),e.jsx("div",{className:"mt-2 text-sm text-white",children:"Trending: forest, wallpaper, background, happy, love"})]})})]}),e.jsx("div",{className:"w-full p-4",children:m.length===0?e.jsx("p",{children:"No posts available"}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:m.map(s=>e.jsxs("div",{className:"relative group cursor-pointer overflow-hidden",style:{gridRowEnd:`span ${Math.floor(Math.random()*11+10)}`},onClick:()=>k(s),children:[e.jsx("img",{src:s.image,alt:s.title,className:"w-full h-full object-cover rounded-lg"}),e.jsx("div",{className:"absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg"})]},s._id))})}),S&&l&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 overflow-auto",children:e.jsxs("div",{className:"bg-white w-11/12 sm:w-3/4 lg:w-1/2 p-6 rounded-lg shadow-lg relative max-h-[90vh] overflow-auto",children:[e.jsx("button",{className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800",onClick:F,children:"âœ–"}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:l.image,alt:l.title,className:"w-auto max-w-full max-h-[calc(100vh-8rem)] object-contain rounded-lg"})}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:l.title}),e.jsx("p",{className:"text-gray-600 mb-4",children:l.description}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:l.tags.map((s,t)=>e.jsxs("span",{className:"bg-gray-200 text-gray-700 px-2 py-1 rounded-full text-sm",children:["#",s]},t))}),e.jsxs("div",{className:"text-sm text-gray-500 mb-4",children:["Uploaded by:",e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx("img",{src:(x=l.user)==null?void 0:x.profilePic,alt:(u=l.user)==null?void 0:u.username,className:"w-10 h-10 rounded-full mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:(g=l.user)==null?void 0:g.username}),e.jsx("p",{className:"text-gray-400 text-xs",children:(f=l.user)==null?void 0:f.email})]})]}),e.jsx(C,{variant:"outline",color:n?"red":"blue",onClick:P,className:"mt-4",children:n?"Unfollow":"Follow"})]}),e.jsx("div",{className:"flex items-center mb-4",children:e.jsxs("p",{className:"text-gray-600",children:[l.likes.length," likes"]})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold mb-2",children:"Comments:"}),l.comments.length>0?e.jsx("ul",{className:"space-y-2",children:l.comments.map(s=>e.jsx("li",{className:"bg-gray-100 p-3 rounded-lg shadow-sm",children:s.content},s._id))}):e.jsx("p",{className:"text-gray-600",children:"No comments yet."})]})]})})]})};export{L as default};
